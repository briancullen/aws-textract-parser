<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@briancullen/aws-textract-parser</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@briancullen/aws-textract-parser</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> @briancullen/aws-textract-parser</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#aws-textract-parser" id="aws-textract-parser" style="color: inherit; text-decoration: none;">
					<h1>AWS Textract Parser</h1>
				</a>
				<p><a href="https://travis-ci.org/briancullen/aws-textract-parser"><img src="https://travis-ci.org/briancullen/aws-textract-parser.svg?branch=master" alt="Build Status"></a>
					<a href="https://codeclimate.com/github/briancullen/aws-textract-parser/maintainability"><img src="https://api.codeclimate.com/v1/badges/566b704c4b4d35be1ea9/maintainability" alt="Maintainability"></a>
				<a href="https://codeclimate.com/github/briancullen/aws-textract-parser/test_coverage"><img src="https://api.codeclimate.com/v1/badges/566b704c4b4d35be1ea9/test_coverage" alt="Test Coverage"></a></p>
				<p>Textract is an AWS service that lets you extract text from pictures or PDF documents. This library was created to process the the response from that service and transform it into something a little more manageable.</p>
				<blockquote>
					<p><strong>NOTE</strong>: Currently this library is only setup to deal with responses from the DetectDocumentText calls, either synchronous or asynchronous. Parsing the calls that analyse documents may be added at a later date.</p>
				</blockquote>
				<a href="#rationale" id="rationale" style="color: inherit; text-decoration: none;">
					<h2>Rationale</h2>
				</a>
				<p>Textract returns json representing the pages, lines and words it has detected in the input. Below is a simplified example of the data you could expect for a single line of text consisting of two words. As you can see the data describes a tree where the line is identified as a child of the page and the words as children of the line.</p>
				<pre><code class="language-json">{
  <span class="hljs-attr">"DocumentMetaData"</span>: {
    <span class="hljs-attr">"Pages"</span>: <span class="hljs-number">1</span>
  },
  <span class="hljs-attr">"Blocks"</span>: [
    {
      <span class="hljs-attr">"Id"</span>: <span class="hljs-string">"1"</span>,
      <span class="hljs-attr">"BlockType"</span>: <span class="hljs-string">"PAGE"</span>,
      <span class="hljs-attr">"Relationships"</span>: [{
        <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"CHILD"</span>,
        <span class="hljs-attr">"Ids"</span>: [ <span class="hljs-string">"2"</span> ]
      }]
    },
    { 
      <span class="hljs-attr">"Id"</span>: <span class="hljs-string">"1"</span>,
      <span class="hljs-attr">"BlockType"</span>: <span class="hljs-string">"LINE"</span>,
      <span class="hljs-attr">"Relationships"</span>: [{
        <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"CHILD"</span>,
        <span class="hljs-attr">"Ids"</span>: [ <span class="hljs-string">"3"</span>, <span class="hljs-string">"4"</span> ]
      }]
    },
    { <span class="hljs-attr">"Id"</span>: <span class="hljs-string">"3"</span>, <span class="hljs-attr">"BlockType"</span>: <span class="hljs-string">"WORD"</span> },
    { <span class="hljs-attr">"Id"</span>: <span class="hljs-string">"4"</span>, <span class="hljs-attr">"BlockType"</span>: <span class="hljs-string">"WORD"</span> }
  ]
}</code></pre>
				<p>Unfortunately this tree structure is flattened into a array which makes navigating it more awkward that it should be. The purpose of this library is to process this flattened json to provide the tree structure described by it.</p>
				<blockquote>
					<p>In some tests the order of the words related to a line did not match that of the text. This is not what you would expect from processing a document. To address this the library will sort the words into left to right order (based on their position on the page).</p>
				</blockquote>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h2>Usage</h2>
				</a>
				<p>The default export from the module is a parser instance that supports three different methods, <code>handleDetectTextCallback</code>, <code>handleDetectTextResponse</code>, and <code>parseGetTextDetection</code>.</p>
				<p><code>handleDetectTextCallback</code> is a helper method that can be passed in as the standard callback to the Textract method. In turn it will call another callback with the processed tree. An example of this type of usage is shown below.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { Textract } <span class="hljs-keyword">from</span> <span class="hljs-string">'aws-sdk'</span>
<span class="hljs-keyword">import</span> textractParser <span class="hljs-keyword">from</span> <span class="hljs-string">'&lt;TBD&gt;'</span>

<span class="hljs-keyword">const</span> textract = <span class="hljs-keyword">new</span> Textract()
<span class="hljs-keyword">const</span> myCallback = <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span>(err) {
    <span class="hljs-built_in">console</span>.log(err)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">console</span>.log(data)
  }
}

<span class="hljs-keyword">const</span> request = {
  Document: {
    S3Object: {
      Bucket: <span class="hljs-string">"your-s3-bucket"</span>,
      Name: <span class="hljs-string">"your-object-key"</span>
    }
  }
}

textract.detectDocumentText(request,
  textractParser.handleDetectTextCallback(myCallback))</code></pre>
				<p><code>handleDetectTextResponse</code> will take a value of type <code>Textract.DetectDocumentTextResponse</code> and process it synchronously. This can be used with the promises provided by the AWS SDK. An example of how to use it in this manner is shown below.</p>
				<pre><code class="language-typescript">textract.detectDocumentText(request).promise()
  .then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> textractParser.parseDetectTextResponse(data))
  .then(<span class="hljs-function"><span class="hljs-params">parsedData</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(parsedData))
  .catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(err))</code></pre>
				<p><code>parseGetTextDetection</code> is a helper method to be used with the GetDocumentTextDetection operation. This operation can return the processed information over multiple requests which causes a problem when trying to construct the complete tree. If all the results are returned in a single response then the <code>handleDetectTextResponse</code> can be used as shown above.</p>
				<p>However, if that is not the case, then this call can be used to retrieve all the data and construct the tree as shown below. To allow the SDK to be configured differently in different environments a instantiated Textract client must be provided to this method.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">const</span> jobId = <span class="hljs-string">'your-job-id'</span>
<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> AWS.Textract()

textract.detectDocumentText(client, jobId)
 .then(<span class="hljs-function"><span class="hljs-params">parsedData</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(parsedData))
 .catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(err))</code></pre>
				<p><strong>NOTE</strong> This method will load the entire set of results into memory which may cause issues for really large documents. To give some context for a 10 page document of text the size of the results returned from textract was in the region of 7MB.</p>
				<a href="#api" id="api" style="color: inherit; text-decoration: none;">
					<h2>API</h2>
				</a>
				<p>See the <a href="https://briancullen.github.io/aws-textract-parser/">API Docs</a> for more information.</p>
				<p>In particular refer to the API for the Document class as this forms the root of the tree that is returned.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-enum">
						<a href="enums/blocktype.html" class="tsd-kind-icon">Block<wbr>Type</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/boundarybox.html" class="tsd-kind-icon">Boundary<wbr>Box</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/geometry.html" class="tsd-kind-icon">Geometry</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/point.html" class="tsd-kind-icon">Point</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/textractparser.html" class="tsd-kind-icon">Textract<wbr>Parser</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/baseblockproperties.html" class="tsd-kind-icon">Base<wbr>Block<wbr>Properties</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/document.html" class="tsd-kind-icon">Document</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/documentmetadata.html" class="tsd-kind-icon">Document<wbr>Metadata</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/lineblock.html" class="tsd-kind-icon">Line<wbr>Block</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/pageblock.html" class="tsd-kind-icon">Page<wbr>Block</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/textprovider.html" class="tsd-kind-icon">Text<wbr>Provider</a>
					</li>
					<li class=" tsd-kind-interface tsd-has-type-parameter">
						<a href="interfaces/treenode.html" class="tsd-kind-icon">Tree<wbr>Node</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/wordblock.html" class="tsd-kind-icon">Word<wbr>Block</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#block" class="tsd-kind-icon">Block</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="globals.html#blocks" class="tsd-kind-icon">Blocks</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#parseddetecttextcallback" class="tsd-kind-icon">Parsed<wbr>Detect<wbr>Text<wbr>Callback</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#polygon" class="tsd-kind-icon">Polygon</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#textractdetecttextcallback" class="tsd-kind-icon">Textract<wbr>Detect<wbr>Text<wbr>Callback</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#textractdetecttextresponse" class="tsd-kind-icon">Textract<wbr>Detect<wbr>Text<wbr>Response</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>